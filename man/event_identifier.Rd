% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/event_identifier.R
\name{event_identifier}
\alias{event_identifier}
\title{Identify Stormflow Events in a Water Input-Flow Time Series}
\usage{
event_identifier(
  datetime,
  water_input,
  flow,
  is_daily = TRUE,
  Rmin = 0.02,
  Lmax = 100,
  baseflow_flag = TRUE,
  exclude_na = TRUE
)
}
\arguments{
\item{datetime}{A vector of class \code{Date} (for daily data) or \code{POSIXct} (for hourly data)
representing the timestamps of observations. Must be the same length as \code{water_input} and \code{flow}.}

\item{water_input}{A numeric vector representing the time series of water input
(e.g., rainfall or rainfall + snowmelt), in daily or hourly time scale.}

\item{flow}{A numeric vector of catchment response (e.g., streamflow) in the same
time scale and unit as \code{water_input}.}

\item{is_daily}{Logical. If \code{TRUE}, assumes inputs are in daily time scale.
If \code{FALSE}, assumes hourly data.}

\item{Rmin}{Numeric. Minimum rainfall intensity threshold (in hourly units)
used to terminate stormflow events. Should match the hourly unit of \code{water_input}.}

\item{Lmax}{Integer. Maximum window length to explore for the catchment
response time, in daily or hourly units depending on \code{is_daily}. Only
odd values in the range 3:2:Lmax are tested.}

\item{baseflow_flag}{Logical. If \code{TRUE}, subtracts a baseflow signal from
the flow before calculating runoff volume and ratio.}

\item{exclude_na}{Logical. If \code{TRUE}, excludes events that contain \code{NA}
values in the flow data. Treated as zeros otherwise.}
}
\value{
A data frame with one row per identified stormflow event, and the following columns:
\itemize{
  \item \code{waterInput_start}: Start time of the water input event
  \item \code{waterInput_end}: End time of the water input event
  \item \code{waterInput_duration}: Duration of the water input event
  \item \code{waterInput_volume}: Total water input volume over the event
  \item \code{stormflow_start}: Start time of the corresponding stormflow response
  \item \code{stormflow_end}: End time of the stormflow response
  \item \code{stormflow_duration}: Duration of the stormflow event
  \item \code{stormflow_volume}: Total stormflow volume during the response
  \item \code{runoff_ratio}: Ratio of stormflow volume to water input volume
  \item \code{flow_missing_fraction}: Fraction of missing values in the flow data during the event
}
}
\description{
Identifies stormflow events based on rainfall (or water input) and flow time series
using the Detrending Moving-Average Cross-Correlation Analysis (DMCA) method.
The function supports both daily and hourly input data. Flow and water input
units should be consistent (e.g., mm/day, mÂ³/hr).
}
\details{
When daily data is used, the function internally converts values to an hourly
scale for event detection. If total streamflow is provided, setting
\code{baseflow_flag = TRUE} subtracts a baseflow signal from the flow values
for calculation of runoff volume and ratio calculations.


- The length of \code{datetime}, \code{water_input}, and \code{flow} must be equal.
- When \code{is_daily = TRUE}, flow and water input are adjusted to an hourly scale
  for the event identification procedure.
- \code{Rmin} should be specified in hourly units, even if \code{is_daily = TRUE}.
- \code{Lmax} defines the upper limit for catchment response lag. For example,
  \code{Lmax = 300} (hours) searches a range of up to ~6.25 days.
}
